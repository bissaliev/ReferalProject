# ReferralProject

## Описание

Проект представляет собой Rest Api сервис простой реферальной системы, использующий авторизацию по номеру телефона и коду верификации. Пользователь получает код приглашения от другого зарегистрированного пользователя на сервисе. Предварительно авторизовавшись, пользователь активирует код. При регистрации каждому пользователю присваивается инвайт-код. Проект доступен в сети по адресу https://bissalievoleg.pythonanywhere.com

## Технологии

-   python 3.12
-   django 5
-   djangorestframework 3.15

## Функционал

### Авторизация по номеру телефона:

Пользователь проходит двухэтапную верификацию:

-   На первом этапе пользователь вводит номер телефона, после чего ему отправляется 4-значный код верификации (эмуляция отправки).
-   На втором этапе пользователь подтверждает код, чтобы завершить авторизацию и получить токен для доступа к API.

### Реферальная система:

-   Зарегистрированный пользователь может отправить свой уникальный инвайт-код другому человеку.
-   Новый пользователь, авторизовавшись, активирует полученный инвайт-код.
-   При успешной активации инвайт-кода информация об этом отображается в профиле пригласившего пользователя.

### Инвайт-код:

-   При регистрации каждому пользователю автоматически присваивается уникальный инвайт-код.
-   В профиле пользователя доступен список всех приглашённых пользователей, которые активировали его инвайт-код.

### Документация API:

-   Полная спецификация API доступна по адресу /docs/.

Установка на локальный сервер

Клонируйте репозиторий:

```bash
git clone git@github.com:bissaliev/ReferralProject.git
cd ReferralProject/
```

Установите и активируйте виртуальное окружение:

```bash
python3 -m venv venv
source venv/bin/activate - для Linux
```

Установите зависимости:

```bash
pip install -r requirements.txt
```

Создайте файл `.env` в корне проекта с нужными значениями:

```bash
SECRET_KEY=<ваш секретный ключ>
DATABASE=postgres # Установите если хотите работать с PostgreSQL(по умолчанию sqlite)
DB_NAME=
DB_USER=
DB_PASSWORD=
DB_HOST=
DB_PORT=5432
```

Перейдите в папку `referralapp` и выполните миграции:

```bash
cd referralapp/
python3 manage.py migrate
```

Создайте суперпользователя:

```bash
python manage.py createsuperuser
```

Запустите проект:

```bash
python manage.py runserver
```

## Эндпоинты

[Получить код верификации](http://127.0.0.1:8000/api/v1/auth/phone/)

[Подтверждение авторизации](http://127.0.0.1:8000/api/v1/auth/verify/)

[Профиль пользователя](http://127.0.0.1:8000/api/v1/users/me/)

[Активация инвайт-кода](http://127.0.0.1:8000/api/v1/users/activate-invite-code/)

## Эндпоинты на ресурсе

[Получить код верификации](https://bissalievoleg.pythonanywhere.com/api/v1/auth/phone/)

[Подтверждение авторизации](https://bissalievoleg.pythonanywhere.com/api/v1/auth/verify/)

[Профиль пользователя](https://bissalievoleg.pythonanywhere.com/api/v1/users/me/)

[Активация инвайт-кода](https://bissalievoleg.pythonanywhere.com/api/v1/users/activate-invite-code/)
